<app-layout>
  <div
    *ngIf="drawing"
    class="flex flex-col flex-nowrap gap-2 sm:grid sm:grid-cols-2"
    [ngClass]="{ favorite: drawing.favorite }">
    <!-- TODO: añadir botón de admin para editarlo -->

    <div class="flex w-full flex-col gap-2 sm:col-span-2">
      <h1 class="mr-image-page-title">{{ drawing.title }}</h1>

      <app-art-details-title
        [character]="drawing.name"
        [modelName]="drawing.modelName">
      </app-art-details-title>
    </div>

    <div class="flex w-full flex-col flex-nowrap gap-2">
      <app-art-details-image
        [drawing]="drawing"
        (submittedCheer)="receiveCheer($event)"></app-art-details-image>
    </div>
    <div class="w-full">
      <app-tab-panel [tabs]="panelTabs" selectedTab="comments">
        <app-art-details-comment-wrapper
          tab-content-comments
          [comments]="drawing.listComments">
        </app-art-details-comment-wrapper>

        <app-art-details-comment-wrapper
          tab-content-likes
          [comments]="drawing.listCommentPros"
          [type]="'like'">
        </app-art-details-comment-wrapper>

        <app-art-details-comment-wrapper
          tab-content-dislikes
          [comments]="drawing.listCommentCons"
          [type]="'dislike'">
        </app-art-details-comment-wrapper>

        <app-spotify-track
          tab-content-spotify
          *ngIf="drawing.spotifyTrackId !== ''"
          [trackId]="drawing.spotifyTrackId"></app-spotify-track>

        <app-art-details-score-board
          tab-content-vote
          [drawing]="drawing"
          (voteSubmitted)="receiveVoteSubmitted($event)">
        </app-art-details-score-board>

        <div
          tab-content-details
          class="col-span-1 flex flex-col flex-nowrap gap-2 sm:col-span-2">
          <app-details-section
            type="views"
            [rawText]="drawing.views.toString()">
          </app-details-section>

          <app-details-section
            type="votes"
            [rawText]="drawing.votesPopular.toString()">
          </app-details-section>

          <app-details-section
            type="date"
            [rawText]="
              drawing.date !== '' ? drawing.formattedDate : 'No Date Known'
            ">
          </app-details-section>

          <app-details-section type="time" [rawText]="drawing.timeHuman">
          </app-details-section>

          <app-details-section type="style" [rawText]="drawing.typeName">
          </app-details-section>

          <app-details-section
            *ngIf="drawing.software > 0"
            type="software"
            [rawText]="drawing.softwareName">
          </app-details-section>

          <app-details-section
            *ngIf="drawing.paper > 0"
            type="paper"
            [rawText]="drawing.paperHuman">
          </app-details-section>

          <app-details-section
            *ngIf="drawing.productType > 0 && drawing.productName !== ''"
            [type]="getProductSectionType()"
            [rawText]="drawing.productName">
          </app-details-section>

          <app-details-section
            *ngIf="drawing.modelName !== ''"
            type="model"
            [rawText]="drawing.modelName">
          </app-details-section>

          <app-details-section
            *ngIf="drawing.referenceUrl !== ''"
            type="reference">
            <a [href]="drawing.referenceUrl" target="_blank"
              >Abrir en nueva pestaña</a
            >
          </app-details-section>

          <app-details-section
            class="sm:col-span-2"
            *ngIf="drawing.tags.length > 0"
            [tags]="true"
            [capitalize]="true"
            [listTags]="drawing.tags">
          </app-details-section>
        </div>
      </app-tab-panel>
    </div>
  </div>

  <!-- TODO: crear plantilla para imagen no encontrada -->
  <div *ngIf="drawingNotFound">Drawing Not Found</div>
</app-layout>
