<app-layout>
  <div
    *ngIf="drawing"
    class="flex flex-col flex-nowrap gap-2 sm:grid sm:grid-cols-2 lg:grid-cols-3">
    <!-- TODO: añadir botón de admin para editarlo -->

    <div class="flex flex-col gap-2 sm:col-span-2 lg:col-span-3">
      <div
        class="border-b text-2xl italic"
        [ngClass]="
          drawing.favorite
            ? 'border-b-gold-500 text-gold-500'
            : 'border-b-main-400 text-main-400'
        ">
        <h1 class="mr-image-page-title">{{ drawing.title }}</h1>
      </div>

      <app-art-details-title
        [character]="drawing.name"
        [modelName]="drawing.modelName">
      </app-art-details-title>
    </div>

    <div class="flex flex-col flex-nowrap gap-2">
      <app-art-details-image
        [drawing]="drawing"
        (requestOpenScoreForm)="openVoteForm()"></app-art-details-image>

      <app-art-details-score-board [drawing]="drawing" *ngIf="showVoteForm">
      </app-art-details-score-board>
    </div>

    <div class="flex flex-col gap-5">
      <div class="mr-social-container">
        <app-spotify-track
          [trackId]="drawing.spotifyTrackId"></app-spotify-track>
      </div>

      <app-art-details-comment-wrapper [comments]="drawing.listComments">
      </app-art-details-comment-wrapper>
    </div>

    <div
      class="grid grid-cols-1 gap-2 sm:col-span-2 sm:grid-cols-2 lg:col-span-1 lg:grid-cols-1">
      <app-art-details-comment-wrapper
        [comments]="drawing.listCommentPros"
        [type]="'like'">
      </app-art-details-comment-wrapper>

      <app-art-details-comment-wrapper
        [comments]="drawing.listCommentCons"
        [type]="'dislike'">
      </app-art-details-comment-wrapper>
    </div>

    <div
      class="col-span-1 mt-20 flex flex-col flex-nowrap gap-2 sm:col-span-2 lg:col-span-3">
      <app-details-section
        type="date"
        [rawText]="
          drawing.date !== '' ? drawing.formattedDate : 'No Date Known'
        ">
      </app-details-section>

      <app-details-section type="time" [rawText]="drawing.timeHuman">
      </app-details-section>

      <app-details-section type="style" [rawText]="drawing.typeName">
      </app-details-section>

      <app-details-section
        *ngIf="drawing.software > 0"
        type="software"
        [rawText]="drawing.softwareName">
      </app-details-section>

      <app-details-section
        *ngIf="drawing.paper > 0"
        type="paper"
        [rawText]="drawing.paperHuman">
      </app-details-section>

      <app-details-section
        *ngIf="drawing.productType > 0 && drawing.productName !== ''"
        [type]="getProductSectionType()"
        [rawText]="drawing.productName">
      </app-details-section>

      <app-details-section
        *ngIf="drawing.modelName !== ''"
        type="model"
        [rawText]="drawing.modelName">
      </app-details-section>

      <app-details-section *ngIf="drawing.referenceUrl !== ''" type="reference">
        <a [href]="drawing.referenceUrl" target="_blank"
          >Abrir en nueva pestaña</a
        >
      </app-details-section>

      <app-details-section
        class="sm:col-span-2"
        *ngIf="drawing.tags.length > 0"
        [tags]="true"
        [capitalize]="true"
        [listTags]="drawing.tags">
      </app-details-section>
    </div>
  </div>

  <div *ngIf="drawingNotFound">Drawing Not Found</div>
</app-layout>
