<div class="video-player-container w-full" style="width: 100%">
  <div class="relative w-full overflow-hidden bg-black shadow-lg">
    <video
      controls
      autoplay
      #videoPlayer
      class="w-full"
      style="height: auto"
      [controls]="controls"
      [autoplay]="autoplay"
      [muted]="muted"
      [loop]="loop"
      [preload]="preload"
      [poster]="posterUrl"
      controlslist="nodownload"
      (loadstart)="onVideoLoadStart()"
      (loadedmetadata)="onVideoMetadataLoaded()"
      (canplay)="onVideoCanPlay()"
      (error)="onVideoError($event)"
      (stalled)="onVideoError($event)"
      (suspend)="onVideoError($event)"
      (abort)="onVideoError($event)">
      <source [src]="videoUrl" type="video/mp4" />
      <p class="p-4 text-white">
        {{ text('NOT-SUPPORTED') | mrTranslate }}
      </p>
    </video>

    <!-- Loading overlay -->
    <div
      *ngIf="isLoading && showLoadingOverlay"
      class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50">
      <div class="flex flex-col items-center gap-2 text-white">
        <div
          class="h-8 w-8 animate-spin rounded-full border-2 border-white border-t-transparent"></div>
        <span class="text-sm">{{ text('LOADING') | mrTranslate }}</span>
      </div>
    </div>

    <!-- Error overlay -->
    <div
      *ngIf="!isReady && hasError && showErrorOverlay"
      class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-75">
      <div class="flex flex-col items-center gap-2 text-white">
        <i class="bi bi-exclamation-triangle text-2xl text-red-400"></i>
        <span class="text-sm">{{ text('ERROR') | mrTranslate }}</span>
        <button (click)="retryVideo()" class="btn btn-primary">
          {{ text('RETRY') | mrTranslate }}
        </button>
      </div>
    </div>
  </div>
</div>
