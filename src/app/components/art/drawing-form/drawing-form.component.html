<app-layout>
  <!-- TODO: extraer strings de esta pantalla -->
  <h1>
    <ng-container *ngIf="newDrawing; else titleEditForm"
      >TITLE-CREATE</ng-container
    >
    <ng-template #titleEditForm>TITLE-EDIT {{ drawing.id }}</ng-template>
  </h1>
  <form
    class="grid grid-cols-1 gap-4"
    (submit)="saveDrawing()"
    [formGroup]="form">
    <div class="form-group">
      <label for="iId">ID</label>
      <input
        *ngIf="newDrawing; else idEdit"
        id="iId"
        formControlName="id"
        type="text"
        [placeholder]="text('INPUTS.ID.PLACEHOLDER') | mrTranslate" />
      <ng-template #idEdit>
        <span>{{ drawing.id }}</span>
      </ng-template>
    </div>

    <app-text-input
      formControlName="path"
      [placeholder]="text('INPUTS.PATH.PLACEHOLDER') | mrTranslate"
      [label]="'PATH'">
    </app-text-input>

    <app-text-input
      formControlName="title"
      [placeholder]="text('INPUTS.TITLE.PLACEHOLDER') | mrTranslate"
      [label]="'TITLE'">
    </app-text-input>

    <app-switch [text]="'FAVORITE'" [formControl]="form.controls.favorite">
    </app-switch>

    <app-text-input
      formControlName="name"
      [placeholder]="text('INPUTS.NAME.PLACEHOLDER') | mrTranslate"
      [label]="'NAME'">
    </app-text-input>

    <app-text-input
      formControlName="modelName"
      [placeholder]="text('INPUTS.MODEL-NAME.PLACEHOLDER') | mrTranslate"
      [label]="'MODEL-NAME'">
    </app-text-input>

    <app-select-input [options]="listDrawingStyles" formControlName="type">
    </app-select-input>

    <app-select-input
      [firstOption]="{
        value: '0',
        label: '',
        labelCode: 'SCREENS.DRAWING-SEARCH.FORM.SOFTWARE.TITLE',
      }"
      [options]="listDrawingSoftwares"
      formControlName="software">
    </app-select-input>

    <app-select-input
      [firstOption]="{
        value: '0',
        label: '',
        labelCode: 'SCREENS.DRAWING-SEARCH.FORM.PAPER.TITLE',
      }"
      [options]="listDrawingPapers"
      formControlName="paper">
    </app-select-input>

    <!-- TODO: añadir campo de tipo fecha -->

    <app-date-input
      formControlName="dateHyphen"
      [label]="'DATE'"
      [placeholder]="'DATE'">
    </app-date-input>

    <app-text-input
      type="number"
      [min]="1"
      [max]="100"
      formControlName="scoreCritic"
      [placeholder]="text('INPUTS.SCORE-CRITIC.PLACEHOLDER') | mrTranslate"
      [label]="'SCORE-CRITIC'">
    </app-text-input>

    <app-drawing-score [score]="form.value.scoreCritic ?? 0">
    </app-drawing-score>

    <app-text-input
      type="number"
      [min]="0"
      formControlName="time"
      [placeholder]="text('INPUTS.TIME.PLACEHOLDER') | mrTranslate"
      [label]="'TIME'">
    </app-text-input>
    <!-- TODO: añadir calculo de horas a las que equivale los minutos -->

    <app-select-input
      [firstOption]="{
        value: '-1',
        label: '',
        labelCode: 'SCREENS.DRAWING-SEARCH.FORM.PRODUCT-TYPE.TITLE',
      }"
      [options]="listDrawingProductTypes"
      formControlName="productType">
    </app-select-input>

    <app-text-input
      formControlName="productName"
      [placeholder]="text('INPUTS.PRODUCT-NAME.PLACEHOLDER') | mrTranslate"
      [label]="'PRODUCT-NAME'">
    </app-text-input>

    <app-drawing-form-comments
      [formArrayName]="'listComments'"
      [formArray]="listComments"
      [comments]="drawing.listComments"
      [label]="'INPUTS.COMMENTS.TITLE'"
      [placeholder]="'INPUTS.COMMENTS.PLACEHOLDER'">
    </app-drawing-form-comments>

    <app-drawing-form-comments
      [formArrayName]="'listCommentPros'"
      [formArray]="listCommentPros"
      [comments]="drawing.listCommentPros"
      [label]="'INPUTS.COMMENTS-PROS.TITLE'"
      [placeholder]="'INPUTS.COMMENTS-PROS.PLACEHOLDER'">
    </app-drawing-form-comments>

    <app-drawing-form-comments
      [formArrayName]="'listCommentCons'"
      [formArray]="listCommentCons"
      [comments]="drawing.listCommentCons"
      [label]="'INPUTS.COMMENTS-CONS.TITLE'"
      [placeholder]="'INPUTS.COMMENTS-CONS.PLACEHOLDER'">
    </app-drawing-form-comments>

    <app-text-input
      formControlName="tagsText"
      [placeholder]="text('INPUTS.TAGS.PLACEHOLDER') | mrTranslate"
      [label]="'TAGS'">
    </app-text-input>

    <app-text-input
      formControlName="referenceUrl"
      [placeholder]="text('INPUTS.REFERENCE-URL.PLACEHOLDER') | mrTranslate"
      [label]="'REFERENCE-URL'">
    </app-text-input>

    <app-text-input
      formControlName="spotifyUrl"
      [placeholder]="text('INPUTS.SPOTIFY-URL.PLACEHOLDER') | mrTranslate"
      [label]="'SPOTIFY-URL'">
    </app-text-input>

    <button class="btn" type="submit">SAVE</button>
  </form>

  <!-- TODO: llevar esto al Art/Edit component -->
  <div *ngIf="drawingNotFound" class="flex flex-col flex-nowrap gap-3">
    <h1>
      {{ text('NOTFOUND.TITLE') | mrTranslate }}
    </h1>
    <h3>
      {{ text('NOTFOUND.SUBTITLE') | mrTranslate: { id: drawing.id } }}
    </h3>
    <a routerLink="/art">
      {{ text('NOTFOUND.GO-TO-GALLERY') | mrTranslate }}
    </a>
  </div>
</app-layout>
